!function(t){"use strict";function e(t){if(this.value=void 0,this.deferreds=[],arguments.length>0)if("function"==typeof t){var e=this;try{t(function(t){e.fulfill(t)},function(t){e.reject(t)})}catch(i){e.reject(i)}}else this.fulfill(t)}function i(t,e,i){var n=t[e],r=t.promise;u(n)?l(function(){try{i=n(i),r.fulfill(i)}catch(t){r.reject(t)}}):r[e](i)}function n(t,e,i){return{promise:t,fulfill:e,reject:i}}function r(t){return t&&"object"==typeof t}function u(t){return t&&"function"==typeof t}var l;"function"==typeof define&&define.amd?define(["subsequent"],function(t){return l=t,e}):"object"==typeof module&&module.exports?(module.exports=e,l=require("subsequent")):(t.Davy=e,l=t.subsequent),e.prototype.isFulfilled=!1,e.prototype.isRejected=!1,e.prototype.then=function(t,r){var u=new e,l=n(u,t,r);return this.isFulfilled||this.isRejected?i(l,this.isFulfilled?e.SUCCESS:e.FAILURE,this.value):this.deferreds.push(l),u},e.prototype["catch"]=function(t){return this.then(null,t)},e.prototype["throw"]=function(){return this["catch"](function(t){l(function(){throw t})})},e.prototype.fulfill=function(t){if(!this.isFulfilled&&!this.isRejected){var e=!1;try{if(t===this)throw new TypeError("Can't resolve a promise with itself.");if(r(t)||u(t)){var i=t.then,n=this;if(u(i))return void i.call(t,function(t){e||(e=!0,n.fulfill(t))},function(t){e||(e=!0,n.reject(t))})}this.isFulfilled=!0,this.complete(t)}catch(l){e||this.reject(l)}}},e.prototype.reject=function(t){this.isFulfilled||this.isRejected||(this.isRejected=!0,this.complete(t))},e.prototype.complete=function(t){this.value=t;for(var n=this.isFulfilled?e.SUCCESS:e.FAILURE,r=0;r<this.deferreds.length;++r)i(this.deferreds[r],n,t);this.deferreds=void 0},e.SUCCESS="fulfill",e.FAILURE="reject",e.all=function(){function t(t){l.reject(t)}function i(e,o){return r(o)&&u(o.then)?void o.then(function(t){i(e,t)},t):(n[e]=o,void(0===--f&&l.fulfill(n)))}var n=[].slice.call(1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments),l=new e,f=n.length;0===f&&l.fulfill([]);for(var o=0;o<n.length;++o)i(o,n[o]);return l},e.wrap=function(t){return function(){var i=[].slice.call(arguments),n=new e;return i.push(function(t,e){t?n.reject(t):n.fulfill(e)}),t.apply(this,i),n}}}(this);
//# sourceMappingURL=davy.min.js.map