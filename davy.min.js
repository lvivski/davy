!function(t){"use strict";function e(t){if(this.value=void 0,this.deferreds=[],arguments.length>0)if("function"==typeof t){var e=this;try{t(function(t){e.fulfill(t)},function(t){e.reject(t)})}catch(n){e.reject(n)}}else this.fulfill(t)}function n(t,e,n){var r=t[e],i=t.promise;u(r)?f(function(){try{n=r(n),i.fulfill(n)}catch(t){i.reject(t)}}):i[e](n)}function r(t,e,n){return{promise:t,fulfill:e,reject:n}}function i(t){return t&&"object"==typeof t}function u(t){return t&&"function"==typeof t}function o(t){return 1===t.length&&Array.isArray(t[0])?t[0]:[].slice.call(t)}var f;"function"==typeof define&&define.amd?define(["subsequent"],function(t){return f=t,e}):"object"==typeof module&&module.exports?(module.exports=e,f=require("subsequent")):(t.Davy=e,f=t.subsequent),e.prototype.isFulfilled=!1,e.prototype.isRejected=!1,e.prototype.then=function(t,i){var u=new e,o=r(u,t,i);return this.isFulfilled||this.isRejected?n(o,this.isFulfilled?e.SUCCESS:e.FAILURE,this.value):this.deferreds.push(o),u},e.prototype.fulfill=function(t){if(!this.isFulfilled&&!this.isRejected){if(t===this)throw new TypeError("Can't resolve a promise with itself.");if(i(t)||u(t)){var e;try{e=t.then}catch(n){return void this.reject(n)}if(u(e)){var r=!1,o=this;try{e.call(t,function(t){r||(r=!0,o.fulfill(t))},function(t){r||(r=!0,o.reject(t))})}catch(n){r||this.reject(n)}return}}this.isFulfilled=!0,this.complete(t)}},e.prototype.reject=function(t){this.isFulfilled||this.isRejected||(this.isRejected=!0,this.complete(t))},e.prototype.complete=function(t){this.value=t;for(var r=this.isFulfilled?e.SUCCESS:e.FAILURE,i=0;i<this.deferreds.length;++i)n(this.deferreds[i],r,t);this.deferreds=void 0},e.SUCCESS="fulfill",e.FAILURE="reject",e.prototype["catch"]=function(t){return this.then(null,t)},e.prototype["throw"]=function(){return this["catch"](function(t){f(function(){throw t})})},e.prototype["finally"]=function(t){return this.then(t,t)},e.prototype["yield"]=function(t){return this.then(function(){return t})},e.prototype.tap=function(t){return this.then(t)["yield"](this)},e.prototype.spread=function(t,e){return this.then(function(e){return t.apply(this,e)},e)},e.resolve=e.cast=function(t){return i(t)&&u(t.then)?t:new e(t)},e.reject=function(t){var n=new e;return n.reject(t),n},e.each=function(t,n){var r=new e,i=t.length;0===i&&r.reject(TypeError());for(var u=0;i>u;++u)n(t[u],u);return r},e.all=function(){function t(t){c.reject(t)}function n(e,o){return i(e)&&u(e.then)?void e.then(function(t){n(t,o)},t):(r[o]=e,void(0===--f&&c.fulfill(r)))}var r=o(arguments),f=r.length,c=e.each(r,n);return c},e.race=function(){function t(t){f.reject(t)}function n(e){return i(e)&&u(e.then)?void e.then(n,t):void f.fulfill(e)}var r=o(arguments),f=e.each(r,n);return f},e.wrap=function(t){return function(){var n=new e;return arguments[arguments.length++]=function(t,e){t?n.reject(t):n.fulfill(e)},t.apply(this,arguments),n}}}(this);
//# sourceMappingURL=davy.min.js.map