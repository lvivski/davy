!function(e){"use strict";function t(e){if(this.value=void 0,this.__deferreds__=[],arguments.length>0){var t=new n(this);"function"==typeof e?n.resolve(e,t):t.fulfill(e)}}function n(e){this.promise=e}function r(e){return e&&"object"==typeof e}function i(e){return e&&"function"==typeof e}function o(e){return 0===Object.keys(e).length}function u(e){return r(e)&&i(e.then)}function f(e){if(1===e.length&&Array.isArray(e[0]))return e[0];for(var t=new Array(e.length),n=0;n<t.length;)t[n]=e[n++];return t}var l;"function"==typeof define&&define.amd?define(["subsequent"],function(e){return l=e,t}):"object"==typeof module&&module.exports?(module.exports=t,l=require("subsequent")):(e.Davy=t,l=e.subsequent),t.prototype.isFulfilled=!1,t.prototype.isRejected=!1,t.prototype.then=function(e,r,i){var o=t.defer(),u={resolver:o,fulfill:e,reject:r,notify:i};return this.isFulfilled||this.isRejected||this.value?n.handle(this,[u]):this.value||this.__deferreds__.push(u),o.promise},n.SUCCESS="fulfill",n.FAILURE="reject",n.NOTIFY="notify",n.prototype.fulfill=function(e){var t=this.promise;if(!t.isFulfilled&&!t.isRejected){if(e===t)return void this.reject(new TypeError("Can't resolve a promise with itself."));if(r(e)||i(e)){var o;try{o=e.then}catch(u){return void this.reject(u)}if(i(o))return void n.resolve(function(t,n,r){e.then(t,n,r)},this)}t.isFulfilled=!0,n.complete(t,e)}},n.prototype.reject=function(e){var t=this.promise;t.isFulfilled||t.isRejected||(t.isRejected=!0,n.complete(t,e))},n.prototype.notify=function(e){var t=this.promise;t.isFulfilled||t.isRejected||n.complete(t,e)},n.complete=function(e,t){e.value=t,n.handle(e,e.__deferreds__),(e.isFulfilled||e.isRejected)&&(e.__deferreds__=void 0)},n.handle=function(e,t){if(t.length)for(var r=e.isFulfilled?n.SUCCESS:e.isRejected?n.FAILURE:n.NOTIFY,i=e.value,o=0;o<t.length;)n.handleOne(t[o++],r,i)},n.handleOne=function(e,t,r){var o=e[t],u=e.resolver;l(function(){if(i(o)){var e;try{e=o(r)}catch(f){return void u.reject(f)}t===n.NOTIFY?u.notify(e):u.fulfill(e)}else u[t](r)})},n.resolve=function(e,t){var n=!0;try{e(function(e){n&&(n=!1,t.fulfill(e))},function(e){n&&(n=!1,t.reject(e))},function(e){t.notify(e)})}catch(r){n&&t.reject(r)}},t.prototype.progress=function(e){return this.then(null,null,e)},t.prototype["catch"]=function(e){return this.then(null,e)},t.prototype["throw"]=function(){return this["catch"](function(e){l(function(){throw e})})},t.prototype["finally"]=function(e){return this.then(e,e)},t.prototype["yield"]=function(e){return this.then(function(){return e})},t.prototype.tap=function(e){return this.then(e)["yield"](this)},t.prototype.spread=function(e,t){return this.then(function(t){return e.apply(this,t)},t)},t.resolve=t.cast=function(e){return u(e)?e:new t(e)},t.reject=function(e){var n=t.defer();return n.reject(e),n.promise},t.defer=function(){return new n(new t)},t.each=function(e,n){var r=t.defer(),i=e.length;0===i&&r.fulfill(TypeError());for(var o=0;o<i;)n(e[o],o++,e);return r},t.all=function(){function e(e){o.reject(e)}function n(t,r,f){return u(t)?void t.then(function(e){n(e,r,f)},e):(f[r]=t,void(0===--i&&o.fulfill(f)))}var r=f(arguments),i=r.length,o=t.each(r,n);return o.promise},t.race=function(){function e(e){i.reject(e)}function n(t){return u(t)?void t.then(n,e):void i.fulfill(t)}var r=f(arguments),i=t.each(r,n);return i.promise},t.wrap=function(e){return function(){for(var n=arguments.length,r=0,i=new Array(n),o=t.defer();r<n;)i[r]=arguments[r++];var u=function(e,t){e?o.reject(e):o.fulfill(t)};try{switch(n){case 2:e.call(this,i[0],i[1],u);break;case 1:e.call(this,i[0],u);break;case 0:e.call(this,u);break;default:i.push(u),e.apply(this,i)}}catch(f){o.reject(f)}return o.promise}},t.unwrap=function(e,n){function i(e,u){return t.resolve(e).then(function(e){if(!r(e)||o(e))return e;var f=Array.isArray(e),l=f?[]:{},c=Object.keys(e).map(function(r){if(n&&n[u]!==r)return t.resolve();var o=e[r];return f&&(r=l.length),l[r]=null,i(o,u+1).then(function(e){l[r]=e})});return t.all(c)["yield"](l)})}return i(e,0)}}(Function("return this")());
//# sourceMappingURL=davy.min.js.map